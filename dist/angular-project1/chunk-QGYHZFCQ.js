import{$ as L,$a as ve,Aa as fe,Ab as Be,Ba as U,C as I,Ca as y,D as S,Da as ge,Ea as be,Fa as q,Ga as H,Ia as xe,J as V,Ja as _e,O as s,P as x,S as f,T as le,U as l,W as Y,Y as c,Z as p,_ as v,a as h,aa as M,ab as k,b as C,ba as $,ca as j,cb as ye,db as X,e as ae,ea as T,fa as m,fb as D,i as se,ia as w,ib as Ce,j as ce,ja as me,jb as Ie,ka as Z,la as de,ma as ue,na as Q,oa as z,pa as u,qa as b,ra as G,s as N,sb as Se,t as P,tb as Te,ua as he,v as R,va as ee,vb as Pe,wa as E,x as _,xa as O,y as B,z as pe}from"./chunk-3JZCXEMK.js";var A=class{constructor(){this.BrandId=0,this.TypeId=0,this.Sort="name",this.pageindex=0,this.pagesize=50}};var W=(()=>{let r=class r{constructor(e){this.http=e,this.baseUrl=Ce.apiUrl}getproducts(e){let t=new xe;return e.BrandId&&(t=t.append("brandId",e.BrandId)),e.TypeId&&(t=t.append("typeId",e.TypeId)),e.Sort&&(t=t.append("sort",e.Sort)),e.pageindex&&(t=t.append("PageIndex",e.pageindex)),e.search&&(t=t.append("Search",e.search)),this.http.get(this.baseUrl+"/Products",{params:t})}getproduct(e){return this.http.get(this.baseUrl+"/Products/"+e)}getBrands(){return this.http.get(this.baseUrl+"/Products/Brands")}getTypes(){return this.http.get(this.baseUrl+"/Products/Types")}};r.\u0275fac=function(t){return new(t||r)(R(_e))},r.\u0275prov=N({token:r,factory:r.\u0275fac,providedIn:"root"});let i=r;return i})();function ke(i,r){if(i&1&&(c(0,"div",1)(1,"div",2),v(2,"img",3),c(3,"div",4)(4,"button",5),u(5,"View"),p()()(),c(6,"div",6)(7,"a",7)(8,"h6",8),u(9),p()(),c(10,"span",9),u(11),E(12,"currency"),p()()()),i&2){let o=m();s(2),w("src",o.product.pictureUrl,V),w("alt",o.product.name),s(2),me("routerLink","/shop/",o.product.id,""),s(5),G(" ",o.product.name," "),s(2),b(O(12,5,o.product.price))}}var Oe=(()=>{let r=class r{constructor(){}};r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=_({type:r,selectors:[["app-product-item"]],inputs:{product:"product"},decls:1,vars:1,consts:[["class","card h-100 shadow-sm",4,"ngIf"],[1,"card","h-100","shadow-sm"],[1,"image","position-relative",2,"cursor","pointer"],[1,"img-fluid","bg-info",3,"src","alt"],[1,"d-flex","align-items-center","justify-content-center","hover-overlay"],[1,"btn","btn-primary",3,"routerLink"],[1,"card-body","d-flex","flex-column"],["href","",1,"text-decoration-none"],[1,"text-uppercase"],[1,"mb-2"]],template:function(t,n){t&1&&f(0,ke,13,7,"div",0),t&2&&l("ngIf",n.product)},dependencies:[y,X,q],styles:["btn[_ngcontent-%COMP%]{width:30%;height:40px}.image[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{opacity:1}.image[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover   button[_ngcontent-%COMP%]{transform:none;opacity:1}.hover-overlay[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0;background:#ffffff80;opacity:0;transition:all .5s}.hover-overlay[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{z-index:1000;transition:all .5s}.hover-overlay[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-of-type{transform:translate(-20px)}.hover-overlay[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-of-type{transform:translate(20px)}"]});let i=r;return i})();var Ae=["search"];function Ne(i,r){if(i&1&&(c(0,"option",19),u(1),p()),i&2){let o=r.$implicit;l("value",o.value),s(),G(" ",o.name," ")}}function Ve(i,r){if(i&1){let o=j();c(0,"li",20),T("click",function(){let n=I(o).$implicit,a=m(2);return S(a.onBrandSelected(n.id))}),u(1),p()}if(i&2){let o=r.$implicit,e=m(2);Y("active",o.id===e.shopparams.BrandId),l("value",o.id),s(),b(o.name)}}function $e(i,r){if(i&1){let o=j();c(0,"li",20),T("click",function(){let n=I(o).$implicit,a=m(2);return S(a.onTypeSelected(n.id))}),u(1),p()}if(i&2){let o=r.$implicit,e=m(2);Y("active",o.id===e.shopparams.TypeId),l("value",o.id),s(),b(o.name)}}function Qe(i,r){if(i&1&&(c(0,"div",21),v(1,"app-product-item",22),p()),i&2){let o=r.$implicit;s(),l("product",o)}}function ze(i,r){if(i&1){let o=j();c(0,"div",23)(1,"app-pager",24),T("pageChanged",function(t){I(o);let n=m(2);return S(n.onPageChanged(t))}),p()()}if(i&2){let o=m(2);s(),l("totalCount",o.totalitems)("pageSize",o.shopparams.pagesize)}}function Ge(i,r){if(i&1){let o=j();c(0,"div",1)(1,"div",2)(2,"section",3)(3,"h5",4),u(4,"Sort"),p(),c(5,"select",5),T("change",function(t){I(o);let n=m();return S(n.onSortSelected(t))}),f(6,Ne,2,2,"option",6),p(),c(7,"h5",4),u(8,"Brands"),p(),c(9,"ul",7),f(10,Ve,2,4,"li",8),p(),c(11,"h5",4),u(12,"Types"),p(),c(13,"ul",7),f(14,$e,2,4,"li",8),p()(),c(15,"section",9)(16,"div",10),v(17,"app-paging-header",11),c(18,"div",12)(19,"input",13,14),T("keyup.enter",function(){I(o);let t=m();return S(t.onSearch())}),p(),c(21,"button",15),T("click",function(){I(o);let t=m();return S(t.onSearch())}),u(22,"Search"),p()()(),c(23,"div",16),f(24,Qe,2,1,"div",17),p(),f(25,ze,2,2,"div",18),p()()()}if(i&2){let o=m();s(6),l("ngForOf",o.sortOptions),s(4),l("ngForOf",o.brands),s(4),l("ngForOf",o.types),s(3),l("totalCount",o.totalitems)("pageNumber",o.shopparams.pageindex)("pageSize",o.shopparams.pagesize),s(7),l("ngForOf",o.products),s(),l("ngIf",o.totalitems>0)}}var Fe=(()=>{let r=class r{constructor(e){this.shopService=e,this.products=[],this.brands=[],this.types=[],this.sortOptions=[{name:"Alphabetical",value:"name"},{name:"Price: Low to high",value:"priceAsc"},{name:"Price: High to low",value:"priceDesc"}],this.totalitems=0,this.shopparams=new A}ngOnInit(){this.getproducts(),this.getBrands(),this.getTypes()}getproducts(){this.shopService.getproducts(this.shopparams).subscribe({next:e=>{this.products=e.data,this.totalitems=e.count,this.shopparams.pagesize=e.pageSize},error:e=>console.log(e)})}getBrands(){this.shopService.getBrands().subscribe({next:e=>this.brands=[{id:0,name:"All"},...e],error:e=>console.log(e)})}getTypes(){this.shopService.getTypes().subscribe({next:e=>this.types=[{id:0,name:"All"},...e],error:e=>console.log(e)})}onBrandSelected(e){this.shopparams.BrandId=e,this.shopparams.pageindex=1,this.getproducts()}onTypeSelected(e){this.shopparams.TypeId=e,this.shopparams.pageindex=1,this.getproducts()}onSortSelected(e){this.shopparams.Sort=e.target.value,this.getproducts()}onPageChanged(e){this.shopparams.pageindex!==e&&(this.shopparams.pageindex=e,this.getproducts())}onSearch(){this.shopparams.search=this.searchTerm?.nativeElement.value,this.shopparams.pageindex=1,this.getproducts()}onReset(){this.searchTerm&&(this.searchTerm.nativeElement.value=""),this.shopparams=new A,this.getproducts()}};r.\u0275fac=function(t){return new(t||r)(x(W))},r.\u0275cmp=_({type:r,selectors:[["app-shop"]],viewQuery:function(t,n){if(t&1&&ue(Ae,5),t&2){let a;Q(a=z())&&(n.searchTerm=a.first)}},decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"row"],[1,"col-3"],[1,"text-warning","ms-3"],[1,"form-select","mb-4",3,"change"],[3,"value",4,"ngFor","ngForOf"],[1,"list-group","my-3"],["class","list-group-item",3,"active","value","click",4,"ngFor","ngForOf"],[1,"col-9"],[1,"d-flex","justify-content-between","align-items-center","pb-2"],[3,"totalCount","pageNumber","pageSize"],[1,"d-flex","mt-2"],["type","text","placeholder","Search",1,"form-control","me-2",3,"keyup.enter"],["search",""],[1,"btn","btn-outline-primary","mx-2",3,"click"],[1,"row","row-cols-3","g-3","mb-4"],["class","col",4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"ngIf"],[3,"value"],[1,"list-group-item",3,"value","click"],[1,"col"],[3,"product"],[1,"d-flex","justify-content-center"],[3,"totalCount","pageSize","pageChanged"]],template:function(t,n){t&1&&f(0,Ge,26,8,"div",0),t&2&&l("ngIf",n.types.length>0&&n.brands.length>0)},dependencies:[U,y,Ie,Pe,Se,Te,Oe]});let i=r;return i})();function Ue(i,r){i&1&&$(0)}function qe(i,r){if(i&1&&(L(0),u(1),M()),i&2){let o=m(2).$implicit;s(),b(o.label)}}var He=i=>({"xng-breadcrumb-link-disabled":i}),Le=(i,r,o,e,t,n)=>({$implicit:i,info:r,last:o,first:e,index:t,count:n});function Xe(i,r){if(i&1&&(c(0,"a",7),f(1,Ue,1,0,"ng-container",8)(2,qe,2,1,"ng-container",9),p()),i&2){let o=m(),e=o.$implicit,t=o.last,n=o.first,a=o.index,d=o.count,g=m();l("ngClass",he(10,He,e.disable))("routerLink",e.routeInterceptor?e.routeInterceptor(e.routeLink,e):e.routeLink)("queryParams",g.preserveQueryParams?e.queryParams:void 0)("fragment",g.preserveFragment?e.fragment:void 0)("target",g.anchorTarget?g.anchorTarget:"_self"),le("aria-disabled",e.disable)("tabIndex",e.disable?-1:0),s(),l("ngTemplateOutlet",g.itemTemplate)("ngTemplateOutletContext",ee(12,Le,e.label,e.info,t,n,a,d)),s(),l("ngIf",!g.itemTemplate)}}function We(i,r){i&1&&$(0)}function Je(i,r){if(i&1&&(L(0),u(1),M()),i&2){let o=m(2).$implicit;s(),b(o.label)}}function Ke(i,r){if(i&1&&(c(0,"label",10),f(1,We,1,0,"ng-container",8)(2,Je,2,1,"ng-container",9),p()),i&2){let o=m(),e=o.$implicit,t=o.last,n=o.first,a=o.index,d=o.count,g=m();s(),l("ngTemplateOutlet",g.itemTemplate)("ngTemplateOutletContext",ee(3,Le,e.label,e.info,t,n,a,d)),s(),l("ngIf",!g.itemTemplate)}}function Ye(i,r){i&1&&$(0)}function Ze(i,r){if(i&1&&(L(0),u(1),M()),i&2){let o=m(3);s(),b(o.separator)}}function et(i,r){if(i&1&&(c(0,"li",11),f(1,Ye,1,0,"ng-container",12)(2,Ze,2,1,"ng-container",9),p()),i&2){let o=m(2);s(),l("ngTemplateOutlet",o.separatorTemplate),s(),l("ngIf",!o.separatorTemplate)}}function tt(i,r){if(i&1&&(L(0),c(1,"li",3),f(2,Xe,3,19,"a",4)(3,Ke,3,10,"label",5),p(),f(4,et,3,2,"li",6),M()),i&2){let o=r.last;s(2),l("ngIf",!o),s(),l("ngIf",o),s(),l("ngIf",!o)}}var rt=(()=>{let r=class r{};r.\u0275fac=function(t){return new(t||r)},r.\u0275dir=pe({type:r,selectors:[["","xngBreadcrumbItem",""]]});let i=r;return i})(),J={PREFIX:":",REGEX_IDENTIFIER:"/:[^/]+",REGEX_REPLACER:"/[^/]+"},it="@",Re=i=>i&&Object.keys(i).length>0,re=(()=>{let r=class r{constructor(e,t){this.activatedRoute=e,this.router=t,this.baseHref="/",this.dynamicBreadcrumbStore=[],this.currentBreadcrumbs=[],this.previousBreadcrumbs=[],this.breadcrumbs=new ae([]),this.breadcrumbs$=this.breadcrumbs.asObservable(),this.detectRouteChanges()}detectRouteChanges(){this.setupBreadcrumbs(this.activatedRoute.snapshot),this.router.events.pipe(ce(e=>e instanceof ve)).subscribe(e=>{e.shouldActivate&&this.setupBreadcrumbs(e.state.root)})}setupBreadcrumbs(e){this.previousBreadcrumbs=this.currentBreadcrumbs;let t=this.getRootBreadcrumb();this.currentBreadcrumbs=t?[t]:[],this.prepareBreadcrumbList(e,this.baseHref)}getRootBreadcrumb(){let e=this.router.config.find(a=>a.path===""),t=this.extractObject(e?.data?.breadcrumb),n=this.getFromStore(t.alias,"/");if(Re(t)||Re(n))return h(C(h(h({},n),t),{routeLink:this.baseHref}),this.getQueryParamsFromPreviousList("/"))}prepareBreadcrumbItem(e,t){let{path:n,breadcrumb:a}=this.parseRouteData(e.routeConfig),d=this.resolvePathSegment(n,e),g=`${t}${d}`,ie=this.getFromStore(a.alias,g),ne=this.extractLabel(ie?.label||a?.label,d),K=!1,oe="";return ne||(K=!0,oe=d),h(C(h(h({},ie),a),{label:K?oe:ne,routeLink:g,isAutoGeneratedLabel:K}),this.getQueryParamsFromPreviousList(g))}prepareBreadcrumbList(e,t){if(e.routeConfig?.path){let d=this.prepareBreadcrumbItem(e,t);if(this.currentBreadcrumbs.push(d),e.firstChild)return this.prepareBreadcrumbList(e.firstChild,d.routeLink+"/")}else if(e.firstChild)return this.prepareBreadcrumbList(e.firstChild,t);let n=this.currentBreadcrumbs[this.currentBreadcrumbs.length-1];this.setQueryParamsForActiveBreadcrumb(n,e);let a=this.currentBreadcrumbs.filter(d=>!d.skip);this.breadcrumbs.next(a)}getFromStore(e,t){return this.dynamicBreadcrumbStore.find(n=>e&&e===n.alias||t&&t===n.routeLink||this.matchRegex(t,n.routeRegex))}matchRegex(e,t){return e.match(new RegExp(t))?.[0]===e}resolvePathSegment(e,t){return e.includes(J.PREFIX)&&Object.entries(t.params).forEach(([n,a])=>{e=e.replace(`:${n}`,`${a}`)}),e}getQueryParamsFromPreviousList(e){let{queryParams:t,fragment:n}=this.previousBreadcrumbs.find(a=>a.routeLink===e)||{};return{queryParams:t,fragment:n}}setQueryParamsForActiveBreadcrumb(e,t){if(e){let{queryParams:n,fragment:a}=t;e.queryParams=n?h({},n):void 0,e.fragment=a}}parseRouteData(e){let{path:t,data:n}=e,a=this.mergeWithBaseChildData(e,n?.breadcrumb);return{path:t,breadcrumb:a}}mergeWithBaseChildData(e,t){if(!e)return this.extractObject(t);let n;e.loadChildren?n=e._loadedRoutes.find(d=>d.path===""):e.children&&(n=e.children.find(d=>d.path===""));let a=n?.data?.breadcrumb;return a?this.mergeWithBaseChildData(n,h(h({},this.extractObject(t)),this.extractObject(a))):this.extractObject(t)}set(e,t){let n=this.extractObject(t),a;e.startsWith(it)?a=["alias",C(h({},n),{alias:e.slice(1)})]:e.includes(J.PREFIX)?a=["routeRegex",C(h({},n),{routeRegex:this.buildRegex(e)})]:a=["routeLink",C(h({},n),{routeLink:this.ensureLeadingSlash(e)})],a[1].isAutoGeneratedLabel=!1,this.updateStore(...a),this.updateCurrentBreadcrumbs(...a)}updateStore(e,t){let n=this.dynamicBreadcrumbStore.findIndex(a=>t[e]===a[e]);n>-1?this.dynamicBreadcrumbStore[n]=h(h({},this.dynamicBreadcrumbStore[n]),t):this.dynamicBreadcrumbStore.push(h({},t))}updateCurrentBreadcrumbs(e,t){let n=this.currentBreadcrumbs.findIndex(a=>e==="routeRegex"?this.matchRegex(a.routeLink,t[e]):t[e]===a[e]);if(n>-1){this.currentBreadcrumbs[n]=h(h({},this.currentBreadcrumbs[n]),t);let a=this.currentBreadcrumbs.filter(d=>!d.skip);this.breadcrumbs.next([...a])}}buildRegex(e){return this.ensureLeadingSlash(e).replace(new RegExp(J.REGEX_IDENTIFIER,"g"),J.REGEX_REPLACER)}ensureLeadingSlash(e){return e.startsWith("/")?e:`/${e}`}extractLabel(e,t){let n=typeof e=="object"?e.label:e;return typeof n=="function"?n(t):n}extractObject(e){return e&&(typeof e=="string"||typeof e=="function")?{label:e}:e||{}}};r.\u0275fac=function(t){return new(t||r)(R(k),R(ye))},r.\u0275prov=N({token:r,factory:r.\u0275fac,providedIn:"root"});let i=r;return i})(),wt=(()=>{let r=class r{set separator(e){e instanceof Z?(this.separatorTemplate=e,this._separator=void 0):(this.separatorTemplate=void 0,this._separator=e||"/")}get separator(){return this._separator}constructor(e,t){this.breadcrumbService=e,this._separator="/",this.autoGenerate=!0,this.preserveQueryParams=!0,this.preserveFragment=!0,this.class="",this.setupMessage="not set up yet",this.someParameterValue=null,t.params.subscribe(n=>{this.setupComponent(n.someParam)})}setupComponent(e){this.setupMessage="set up at "+new Date,this.someParameterValue=e}ngOnInit(){this.breadcrumbs$=this.breadcrumbService.breadcrumbs$.pipe(se(e=>e.filter(t=>this.autoGenerate?!0:!t.isAutoGeneratedLabel).map(t=>{let{routeInterceptor:n,routeLink:a}=t;return C(h({},t),{routeLink:n?.(a,t)||a})})))}};r.\u0275fac=function(t){return new(t||r)(x(re),x(k))},r.\u0275cmp=_({type:r,selectors:[["xng-breadcrumb"]],contentQueries:function(t,n,a){if(t&1&&de(a,rt,5,Z),t&2){let d;Q(d=z())&&(n.itemTemplate=d.first)}},inputs:{autoGenerate:"autoGenerate",preserveQueryParams:"preserveQueryParams",preserveFragment:"preserveFragment",class:"class",anchorTarget:"anchorTarget",separator:"separator"},decls:4,vars:4,consts:[["aria-label","breadcrumb",1,"xng-breadcrumb-root",3,"ngClass"],[1,"xng-breadcrumb-list"],[4,"ngFor","ngForOf"],[1,"xng-breadcrumb-item"],["class","xng-breadcrumb-link","rel","noopener noreferrer",3,"ngClass","routerLink","queryParams","fragment","target",4,"ngIf"],["class","xng-breadcrumb-trail",4,"ngIf"],["class","xng-breadcrumb-separator","aria-hidden","true",4,"ngIf"],["rel","noopener noreferrer",1,"xng-breadcrumb-link",3,"ngClass","routerLink","queryParams","fragment","target"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngIf"],[1,"xng-breadcrumb-trail"],["aria-hidden","true",1,"xng-breadcrumb-separator"],[4,"ngTemplateOutlet"]],template:function(t,n){t&1&&(c(0,"nav",0)(1,"ol",1),f(2,tt,5,3,"ng-container",2),E(3,"async"),p()()),t&2&&(l("ngClass",n.class),s(2),l("ngForOf",O(3,2,n.breadcrumbs$)))},dependencies:[fe,U,y,ge,X,be],styles:[`.xng-breadcrumb-root{margin:0}.xng-breadcrumb-list{display:flex;align-items:center;flex-wrap:wrap;margin:0;padding:0}.xng-breadcrumb-item{list-style:none}.xng-breadcrumb-trail{display:flex;align-items:center}.xng-breadcrumb-link{display:flex;align-items:center;white-space:nowrap;color:inherit;text-decoration:none;transition:-webkit-text-decoration .3s;transition:text-decoration .3s;transition:text-decoration .3s,-webkit-text-decoration .3s;cursor:pointer}.xng-breadcrumb-link:hover{text-decoration:underline}.xng-breadcrumb-link-disabled{pointer-events:none;cursor:disabled}.xng-breadcrumb-separator{display:flex;-webkit-user-select:none;user-select:none;margin-left:8px;margin-right:8px}
`],encapsulation:2});let i=r;return i})(),Et=(()=>{let r=class r{};r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=B({type:r}),r.\u0275inj=P({imports:[H,D]});let i=r;return i})();function ot(i,r){if(i&1&&(c(0,"div",2)(1,"div",3),v(2,"img",4),p(),c(3,"div",5)(4,"h2"),u(5),p(),c(6,"p",6),u(7),E(8,"currency"),p(),v(9,"div",7),c(10,"div",8)(11,"h4"),u(12,"Description"),p(),c(13,"p"),u(14),p()()()()),i&2){let o=m();s(2),w("src",o.product.pictureUrl,V),w("alt",o.product.name),s(3),b(o.product.name),s(2),b(O(8,5,o.product.price)),s(7),b(o.product.description)}}var Me=(()=>{let r=class r{constructor(e,t,n){this.shopService=e,this.route=t,this.bcsercice=n,this.bcsercice.set("@productDetails","  ")}ngOnInit(){this.getProduct()}getProduct(){let e=this.route.snapshot.paramMap.get("id");console.log(e),e&&this.shopService.getproduct(+e).subscribe({next:t=>{this.product=t,this.bcsercice.set("@productDetails",t.name)},error:t=>console.log(t)})}};r.\u0275fac=function(t){return new(t||r)(x(W),x(k),x(re))},r.\u0275cmp=_({type:r,selectors:[["app-product-details"]],decls:2,vars:1,consts:[[1,"container"],["class","row",4,"ngIf"],[1,"row"],[1,"col-6"],[1,"w-100",3,"src","alt"],[1,"col-6","mt-5"],[2,"font-size","2em"],[1,"d-flex","justify-content-start","align-items-center"],[1,"row","mt-4"]],template:function(t,n){t&1&&(c(0,"div",0),f(1,ot,15,7,"div",1),p()),t&2&&(s(),l("ngIf",n.product))},dependencies:[y,q]});let i=r;return i})();var at=[{path:"",component:Fe},{path:":id",component:Me,data:{breadcrumb:{alias:"productDetails"}}}],je=(()=>{let r=class r{};r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=B({type:r}),r.\u0275inj=P({imports:[D.forChild(at),D]});let i=r;return i})();var Ut=(()=>{let r=class r{};r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=B({type:r}),r.\u0275inj=P({imports:[H,Be,je]});let i=r;return i})();export{re as a,wt as b,Et as c,Ut as d};
